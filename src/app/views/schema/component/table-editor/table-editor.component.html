<div class="table-editor">
  <div class="tabs-container">
    <mat-tab-group [(selectedIndex)]="selectedTabIndex">
      <mat-tab label="Tabelas ({{tables.length}})">
        <div class="tab-content">
          <div class="search-bar">
            <input type="text" placeholder="Buscar..." class="search-input">
            <button class="search-button">
              <mat-icon>search</mat-icon>
            </button>
          </div>
          
          <div class="action-button">
            <button mat-button class="add-table-btn" (click)="addTable()">
              <mat-icon>add</mat-icon> Adicionar tabela
            </button>
          </div>
          
          <div class="tables-list">
            @for (table of tables; track $index) {
              <div class="table-item" [class.active]="selectedTabIndex === $index">
                <mat-expansion-panel>
                  <mat-expansion-panel-header>
                    <mat-panel-title>
                      {{table.name}}
                    </mat-panel-title>
                  </mat-expansion-panel-header>
                  
                  <div class="table-details">
                    <div class="input-group">
                      <label>Nome:</label>
                      <input type="text" [(ngModel)]="table.name">
                    </div>
                    
                    <div class="columns-container">
                      @for (column of table.columns; track $index) {
                        <div class="column-row">
                          <div class="column-name">
                            <input type="text" [(ngModel)]="column.name">
                          </div>
                          <div class="column-type">
                            <select [(ngModel)]="column.type">
                              <option value="">Type</option>
                              @for (type of dataTypes; track $index) {
                                <option [value]="type">{{type}}</option>
                              }
                            </select>
                          </div>
                          <div class="column-actions">
                            <button mat-icon-button matTooltip="Ajuda" class="help-btn">
                              <mat-icon>help</mat-icon>
                            </button>
                            <button mat-icon-button matTooltip="Chave" class="key-btn">
                              <mat-icon>key</mat-icon>
                            </button>
                            <button mat-icon-button matTooltip="Mais opções" class="more-btn">
                              <mat-icon>more_vert</mat-icon>
                            </button>
                          </div>
                        </div>
                      }
                    </div>

                    <div class="table-actions">
                      <button mat-button class="add-column-btn" (click)="addColumn(table)">
                        Adicionar campo
                      </button>
                      <button mat-icon-button class="remove-table-btn" matTooltip="Remover tabela">
                        <mat-icon>delete</mat-icon>
                      </button>
                    </div>
                  </div>
                </mat-expansion-panel>
              </div>
            }
          </div>
        </div>
      </mat-tab>
    </mat-tab-group>
  </div>
</div> 